<!DOCTYPE html>
<!--
To change this license header, choose License Headers in Project Properties.
To change this template file, choose Tools | Templates
and open the template in the editor.
-->
<html>
    <head>
        <title>Muvi - movies - categories</title>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <link rel="stylesheet" type="text/css" href="../style.css">
        <link href="../font-awesome/css/font-awesome.min.css" rel="stylesheet">
        <script src="movies.js"></script>
        <script type="text/javascript">
            window.addEventListener("load", init);
            window.addEventListener("load", init2);
            
            var tbody;
            
            function init2 () {
                tbody = document.getElementById("the_movies");
            }
            
            function sortbycategory(str) {
                
                tbody.innerHTML = "";
                
                var itemcounter = 0;
                
                var x = getMovies();
                
                var movies = new Array();
                
                for (i = 0; i < x.length; i++) {
                    if (x[i].getElementsByTagName("category")[0].childNodes[0].nodeValue === str) {
                        var tempArr = new Array();
                        tempArr.push(x[i].getElementsByTagName("image")[0].childNodes[0].nodeValue);
                        tempArr.push(x[i].getElementsByTagName("title")[0].childNodes[0].nodeValue);
                        tempArr.push(x[i].getElementsByTagName("year")[0].childNodes[0].nodeValue);
                        tempArr.push(x[i].getElementsByTagName("id")[0].childNodes[0].nodeValue);
                        
                        movies.push(tempArr);
                    }
                    
                }
                
                var numberOfRows;
                
                if (movies.length % 4 === 0 ) {
                    numberOfRows = movies.length / 4;
                }
                
                else {
                    numberOfRows = Math.floor(movies.length / 4) + 1;
                }
                
                
                var itemcounter = 0;
                
                for (i = 0; i < numberOfRows; i++) {
                    var row = tbody.insertRow();
                    var row2 = tbody.insertRow();
                    
                    if (i !== numberOfRows - 1) {
                        row2.className = "not_last";
                    }
                    
                    for (t = 0; t < 4; t++) {
                        
                        
                        
                        var image;
                        var title;
                        var year;
                        var id;
                        
                        if(itemcounter >= movies.length) {
                        }
                        
                        else {
                            
                            var cell = row.insertCell();
                            var cell2 = row2.insertCell();
                            image = movies[itemcounter][0];
                            title = movies[itemcounter][1];
                            year = movies[itemcounter][2];
                            id = movies[itemcounter][3];
                            
                            cell.innerHTML = "<a href='movie.html?movieId="+id+"'><img src='" + image + "' alt='Poster of " + title + "'/></a>";
                            cell2.innerHTML = "<a href='movie.html?movieId="+id+"'>" + title + " (" + year + ")</a>";
                        }

                        itemcounter++;
                        
                    }
                }
            }
            
        </script>     
    </head>
    <body>
        <header>Muvi</header>
        <nav id="navbar">
            <ul id="the-menu">
                <li id="link1"><a href="../"><i class="fa fa-home"></i>Home</a></li>
                <li id="link2" class="selected"><a href="../movies/"><i class="fa fa-film"></i>Movies</a></li>
                <li id="link3"><a href="../about/"><i class="fa fa-info-circle"></i>About</a></li>
                <li id="link4"><a href="../faq/"><i class="fa fa-question-circle"></i>FAQ</a></li>
            </ul>
        </nav>
            
        <section id="main_movies">
            <h1 id="movie_header">Categories</h1>
            <p><a href="categories.html" >Categories</a>   |   <a href="toprated.html">Top rated</a>   |   <a href="mostviewed.html">Most viewed</a>   |   <a href="latest.html">Latest</a></p>
            
            
            <hr /> 
            <p id="small_links"><a class="small_link" onclick="sortbycategory('Western')" >Western</a>   |   <a class="small_link" onclick="sortbycategory('Drama')">Drama</a>   |   <a class="small_link" onclick="sortbycategory('Action')">Action</a>
                |   <a class="small_link" onclick="sortbycategory('Biography')">Biography</a>   |   <a class="small_link" onclick="sortbycategory('Adventure')">Adventure</a>   |   <a class="small_link" onclick="sortbycategory('Horror')">Horror</a></p>
            <table cellspacing="20">
                
                <tbody id="the_movies">
                    <tr id="row1"></tr>
                    <tr id="row2"></tr>
                    <tr id="row3"></tr>
                    <tr id="row4"></tr>
                </tbody>
                
            </table>
            <footer>Muvi is a web page for learning purposes only. Images and information about movies are all courtesy of IMDB.com. Thanks to FontAwesome for icons.</footer>
        </section>
    </body>
</html>
